from aiogram import Dispatcher, types
from aiogram.dispatcher import FSMContext

from telegram_bot.apps.bot import markups
from telegram_bot.apps.bot.filters.base_filters import UserFilter
from telegram_bot.db.models import User


async def start(message: types.Message | types.CallbackQuery, state: FSMContext):
    if isinstance(message, types.CallbackQuery):
        message = message.message
    await state.finish()
    await message.answer("Hi, –§—Ä–µ–Ω–¥ ü§û –í—ã–≥–æ–¥–Ω–æ –ª–∏ –º–∏–Ω—Ç–∏—Ç—å?\n\n–≠—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –∑–≤—É—á–∏—Ç –≤–æ –≤—Å–µ—Ö —á–∞—Ç–∞—Ö –ø–æ—Å—Ç–æ—è–Ω–Ω–æ.\n"
                         "–ï—Å—Ç—å —Ä–µ—à–µ–Ω–∏–µ, –∑–∞–±–∏—Ä–∞–π.\n–ë–æ—Ç–ú–∏–Ω—Ç–∞ Stepnü§ñ\n\n"
                         "‚ùóÔ∏è–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ–¥–∞–∂–∏ —Ç–∞–ø–∫–∞ —Ç–æ–ª—å–∫–æ –¥–æ 2 –º–∏–Ω—Ç–æ–≤ –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ‚ùóÔ∏è\n"
                         "‚ùóÔ∏è10 GMT –≤ —Ä–∞—Å—á–µ—Ç –¥–æ–±–∞–≤–∏–ª\n‚ùó"
                         "–ï—Å–ª–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –º–∏–Ω—Ç–∏—à—å –∏ –ø—Ä–æ–¥–∞–µ—à—å üëü, —Ç—ã –≤—Å–µ –≤—Ä–µ–º—è –∏—â–µ—Ç–µ –∫—É—Ä—Å –Ω–∞ –±–∏—Ä–∂–µ, —Å—á–∏—Ç–∞–µ—à—å –Ω–∞ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–µ —á—Ç–æ –±—ã –Ω–µ —É–π—Ç–∏ –≤ –º–∏–Ω—É—Å, –∑–Ω–∞–∫–æ–º–æ?\n"
                         "–≠—Ç–æ –ë–æ—Ç –¥–ª—è –≤–∞—Å. \n"
                         "–≠–∫–æ–Ω–æ–º–∏—Ç —É–π–º—É –≤—Ä–µ–º–µ–Ω–∏.\n"
                         "------------------------------------\n"
                         "–î–µ–ª–∞–ª –¥–ª—è —Å–µ–±—è, –ø–æ–ª—å–∑—É–π—Ç–µ—Å—åü•∑\n"
                         "-------------------------------------\n\n"
                         "–ù–∞–¥–µ—é—Å—å –ø—Ä–∏ –º–∏–Ω—Ç–µ —Ç–µ–±–µ –≤—ã–ø–∞–ª –¥–æ—Å—Ç–æ–π–Ω—ã–π —Ç–∞–ø–æ–∫ —Ç—ã –º–æ–∂–µ—à—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å.\n\n"
                         "üèÉ‚Äç‚ôÄÔ∏è–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å\n\n:"
                         "1. –ù–∞–∂–∞—Ç—å –î–ê\n"
                         "2. –°–Ω–∞—á–∞–ª–∞ –º—ã –ø—Ä–æ–¥–∞–µ–º –µ–≥–æ —á—Ç–æ –±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å —ç–Ω–µ—Ä–≥–∏—é üîã(–≤–≤–æ–¥–∏–º —Å—É–º–º—É –ø—Ä–æ–¥–∞–∂–∏)\n"
                         "3. –ü–æ–∫—É–ø–∞–µ–º —Å —Ä—ã–Ω–∫–∞ —Å 0 –º–∏–Ω—Ç–æ–º (–≤–≤–æ–¥–∏–º —Å—É–º–º—É –ø–æ–∫—É–ø–∫–∏)\n"
                         "4. –ü—Ä–æ–¥–∞–µ–º –ø–∞–ø—É —Ö–æ—Ä–æ—à–µ–≥–æ (–≤–≤–æ–¥–∏–º —Å—É–º–º—É –ø—Ä–æ–¥–∞–∂–∏)\n"
                         "---------------------------------------------\n\n"
                         "üèÉ‚Äç‚ôÇÔ∏è–ß—Ç–æ –ø–æ–ª—É—á–∏—à—å\n\n:"
                         "1. –ë–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç –∫–∞–∫—É—é –¥–æ–ø. –ø—Ä–∏–±—ã–ª—å —Ç—ã –ø–æ–ª—É—á–∏—à—å –≤ usdt/gst/sol\n"
                         "2. –û–±—â–∏–π PROFITü§ë\n"
                         "3. –ö—É—Ä—Å –º–æ–Ω–µ—Ç (–≤ –º–æ–º–µ–Ω—Ç –∑–∞–ø—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è —Å –±–∏—Ä–∂—ã)\n"
                         "4. –ö–æ–º–∏—Å—Å–∏—è –º–∞—Ä–∫–µ—Ç–∞ –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö —É—á—Ç–µ–Ω–∞\n\n"
                         "–¶–∏–∫–ª —Å–¥–µ–ª–∫–∏:\n"
                         "–ø—Ä–æ–¥–∞–∂–∞ —Ö–æ—Ä–æ—à–µ–≥–æ —Ç–∞–ø–∫–∞ —Å 0 –º–∏–Ω—Ç–æ–º - –ø–æ–∫—É–ø–∫–∞ (–¥–µ—à–µ–≤–æ–≥–æ) - –ø—Ä–æ–¥–∞–∂–∞ –ø–∞–ø—ã\n"
                         "-------------------------------------------\n\n"
                         "–ï—Å–ª–∏ —Ç–µ–±–µ –≤—ã–ø–∞–ª —Ç–∞–ø–æ–∫ –ø–æ —Ñ–ª–æ—Ä—É\n\n"
                         "üèÉ‚Äç‚ôÄÔ∏è–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:\n\n"
                         "1. –ù–∞–∂–∞—Ç—å –ù–ï–¢\n"
                         "2. –ü—Ä–æ–¥–∞—Ç—å –∑–∞–º–∏–Ω—Ç—á–µ–Ω–æ–≥–æ ¬´–ü–∞–ø—É¬ª \n"
                         "------------------------------------\n\n"
                         "üèÉ‚Äç‚ôÇÔ∏è–ß—Ç–æ –ø–æ–ª—É—á–∏—à—å:\n\n"
                         "1. –¢–≤–æ–π PROFITü§ë\n"
                         "2. –ö—É—Ä—Å –º–æ–Ω–µ—Ç (–≤ –º–æ–º–µ–Ω—Ç –∑–∞–ø—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è —Å –±–∏—Ä–∂—ã)\n"
                         "3. –ö–æ–º–∏—Å—Å–∏—è –º–∞—Ä–∫–µ—Ç–∞ –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö —É—á—Ç–µ–Ω–∞\n\n"
                         "---------------------------------\n"
                         "‚ùóÔ∏è–§–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞.\n "
                         "–ü—Ä–∏–º–µ—Ä: 10.6 - —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É‚ùó\nÔ∏è"
                         "-------------------------------------\n"
                         "–ö—É—Ä—Å SOL –∏ GST –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∫–æ–≥–¥–∞ —Ç—ã –æ–±—Ä–∞—â–∞–µ—à—å—Å—è –∫ –±–æ—Ç—É.\n"
                         "---------------------------------\n"
                         "–ó–∞ –ø–æ–¥–±–æ—Ä–∞–º —Ç–∞–ø–∫–∞ , —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π –∏ –ø–æ–∂–µ–ª–∞–Ω–∏–π –≥–æ—É –∫–æ –º–Ω–µ @Roman3217 \n"
                         "---------------------------------\n"
                         "–Ø —Ç—Ä–∞—á—É –º–æ–Ω–µ—Ç–∫—É –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –±–æ—Ç–∞, –±–ª–∞–≥–æ–¥–∞—Ä–æ—á–∫–∞ –∑–∞ —Å–∞—Ç–æ—à–µ—á–∫—É.\n"
                         "–ú–Ω–æ–≥–æ –Ω–µ –Ω–∞–¥–æü¶å\n"
                         "---------------------------------\n"
                         "Wallet: USDC/GST/SOLüëá")
    await message.answer("81CzVw7QcjrvkUUvb6rnxsTkUJji7B5bUZTFnsEnproJ", reply_markup=markups.common_menu.start_menu())


async def go(message: types.Message | types.CallbackQuery, user: User, state: FSMContext):
    if isinstance(message, types.CallbackQuery):
        message = message.message
    await state.finish()
    await user.use_update()
    await message.answer("–ï—Å–ª–∏ —É —Ç–µ–±—è –≤—ã–ø–∞–ª —Ö–æ—Ä–æ—à–∏–π —Ç–∞–ø–æ–∫ —Ç—ã –º–æ–∂–µ—à—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å. –•–æ—á–µ—à—å?",
                         reply_markup=markups.common_menu.go())


def register_common_handlers(dp: Dispatcher):
    callback = dp.register_callback_query_handler
    message = dp.register_message_handler
    message(start, UserFilter(), commands="start", state="*")
    callback(start, UserFilter(), text="start", state="*")
    message(go, UserFilter(), commands="recalculate", state="*")
    callback(go, UserFilter(), text="go", state="*")
